services:
  neo4j:
    image: neo4j:5.15-community
    environment:
      # v5 server.* props; double underscores = dot
      # conservative heap to avoid WSL memory issues
    healthcheck:
      test: ["CMD-SHELL","cypher-shell -u neo4j -p darf_graph_password 'RETURN 1' >/dev/null 2>&1 || exit 1"]
      interval: 10s
      timeout: 5s
      retries: 18
services:
  neo4j:
    environment:
      - NEO4J_server__config__strict_validation__enabled=false
      - NEO4J_server__default__listen__address=0.0.0.0
      - NEO4J_server__bolt__listen__address=:7687
      - NEO4J_server__http__listen__address=:7474
      - NEO4J_server__memory__heap__initial__size=512m
      - NEO4J_server__memory__heap__max__size=1024m
