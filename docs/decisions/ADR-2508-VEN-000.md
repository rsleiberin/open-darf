---
id: ADR-2508-VEN-008
legacy_id: 0008-knowledge-graph
type: VEN
implements_concept: null  # Will create CON ADR for knowledge graph
status: accepted
date: 2025-08-03
title: "Neo4j 5 Community for knowledge graph"

decision_confidence: 8
time_investment: "4_hours"
main_tradeoff: "licensing_limitations vs graph_performance"
alternatives_rejected: ["janusgraph", "arangodb", "dgraph", "memgraph"]
reevaluate_when: "clustering_required OR community_edition_limits_reached"

supersedes: null
superseded_by: null
research_basis: "Janus Backend Architecture – Onboarding Brief"
linked_evidence:
  - "../reference/Janus Backend Architecture – Onboarding Brief.pdf"
  - "../reference/Evaluating RAG Retriever Layer Options for Qdrant and Neo4j.pdf"

tags: ["graph", "knowledge", "semantic", "cypher"]
---

# ADR 0008 – Neo4j 5 Community for knowledge graph

## Decision

Neo4j Community Edition selected as the graph database for Janus's semantic memory and knowledge representation.

## Context

Janus requires a graph database for long-term semantic memory - entities, relationships, and complex reasoning chains that agents learn or use. This enables efficient graph traversal queries for multi-hop reasoning, concept relationships, and knowledge discovery that would be impractical in relational schemas.

## Rationale

**Native Graph Performance**: Neo4j excels at traversal-heavy workloads with Cypher's expressive query language, enabling agents to perform complex reasoning like "find all paths between concept X and Y" efficiently.

**Mature Ecosystem & Community**: As the leading graph database, Neo4j offers:
- Extensive documentation and community resources
- Rich Python integration (official drivers, ORM options)
- Proven algorithms for graph analytics
- GraphRAG compatibility for LLM integration

**ACID Transactions on Graphs**: Ensures consistency for knowledge updates while supporting concurrent agent access to the knowledge base.

**Offline Deployment Ready**: Community Edition runs self-hosted without licensing costs, fits resource constraints of edge deployment scenarios.

## Research Foundation

Comprehensive evaluation in "Janus Backend Architecture – Onboarding Brief" assessed:

- **JanusGraph**: Rejected due to operational complexity (requires Cassandra/HBase backends) unsuitable for modest hardware deployments
- **ArangoDB**: Multi-model appealing but graph query capabilities inferior to Neo4j's Cypher, higher memory footprint
- **Dgraph**: Company pivot concerns, distributed-first design unnecessary for initial scale
- **Memgraph**: In-memory focus problematic for persistence and low-power devices

Neo4j's "market leader position and developer familiarity" provided confidence for agent-driven knowledge management.

## Consequences

### Positive
- Efficient multi-hop reasoning queries for agent cognition
- Rich graph algorithms for knowledge discovery
- Strong integration with GraphRAG for LLM enhancement
- Mature tooling for graph visualization and debugging

### Negative
- **Licensing Risk**: Community Edition limitations may require future migration or Enterprise licensing
- Single-node deployment limits high availability options
- Learning curve for team members unfamiliar with graph thinking

### Neutral
- Cypher query language - powerful but domain-specific
- Memory usage patterns different from relational databases

## Implementation Notes

- **GraphRAG Integration**: Hybrid retrieval combining vector similarity (Qdrant) with graph traversal (Neo4j)
- **Schema Strategy**: Flexible schema evolution using node labels and relationship types
- **Agent Integration**: Direct Cypher queries via Python driver for reasoning operations
- **Cross-Reference Maintenance**: Consistent entity IDs across Neo4j, Qdrant, and PostgreSQL

## Success Criteria

- [ ] Sub-second response for 3-4 hop graph traversals
- [ ] Successful agent-driven knowledge updates without corruption
- [ ] GraphRAG pipeline delivering enhanced LLM context
- [ ] Knowledge graph growth without performance degradation
- [ ] Backup/restore procedures for graph data

## Open Questions

- **Enterprise Migration Path**: If clustering becomes required, evaluate Neo4j Enterprise vs alternatives like JanusGraph
- **Community Edition Limits**: Monitor graph size and feature requirements against Community constraints

## Relationships

- **ENABLES**: Agent semantic reasoning, knowledge discovery, multi-hop question answering
- **INTEGRATES_WITH**: GraphRAG pipeline, vector search (Qdrant), LLM reasoning chains
- **SUPPORTS**: Agent learning and knowledge accumulation over time
