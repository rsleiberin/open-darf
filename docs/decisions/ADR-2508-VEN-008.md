---
id: ADR-2508-VEN-008
legacy_id: 0010-object-store
type: VEN
implements_concept: null  # Will create CON ADR for object storage
status: accepted
date: 2025-08-03
title: "MinIO (S3-compatible) as object storage"

decision_confidence: 9
time_investment: "3_hours"
main_tradeoff: "operational_simplicity vs feature_richness"
alternatives_rejected: ["aws_s3", "ceph", "filesystem", "seaweedfs"]
reevaluate_when: "petabyte_scale_required OR multi_site_replication_needed"

supersedes: null
superseded_by: null
research_basis: "Janus Backend Architecture – Onboarding Brief"
linked_evidence:
  - "../reference/Janus Backend Architecture – Onboarding Brief.pdf"
  - "../reference/Evaluation of Hybrid Local-First Object Storage Solutions.pdf"

tags: ["object_storage", "s3", "files", "offline"]
---

# ADR 0010 – MinIO (S3-compatible) as object storage

## Decision

MinIO selected as the self-hosted object storage solution for large binary files, providing S3-compatible API for agent-generated content and document storage.

## Context

Janus requires storage for large, unstructured binary data - documents, PDFs, images, datasets, and agent-generated artifacts. These files exceed what should be stored in databases and need efficient streaming, multipart upload, and large binary handling capabilities.

## Rationale

**S3 API Compatibility**: Provides familiar S3 interface enabling seamless integration with existing tools and libraries, with future migration path to cloud storage if needed.

**Deployment Simplicity**: Single Go binary deployment with enterprise-grade capabilities - ideal for offline-first architecture requiring minimal operational overhead.

**Performance Optimized**: Multi-core efficiency for high-throughput I/O operations, written in Go for excellent concurrent performance on modest hardware.

**Enterprise Features**:
- Erasure coding for data redundancy across drives/nodes
- Versioning for file history and recovery
- Access policies and security controls
- Web UI for management and monitoring

**ARM64 & Edge Ready**: Native ARM builds enable deployment on Pi/Jetson devices while scaling to distributed clusters when needed.

## Research Foundation

Comprehensive evaluation in "Janus Backend Architecture – Onboarding Brief" assessed:

- **Cloud Storage (S3/GCS)**: Violated offline-first requirement, introduces external dependencies and costs
- **Ceph**: Overly complex for initial scale, requires significant operational expertise and multi-node setup
- **Filesystem/NAS**: Lacks versioning, HTTP API, multipart uploads, and proper conflict resolution for multi-agent access
- **SeaweedFS**: Less mature S3 compatibility, MinIO offered better single-node performance for expected usage patterns

Research emphasized MinIO's "instant REST API" capabilities versus building file serving infrastructure from scratch.

## Consequences

### Positive
- Standard S3 API enables rich ecosystem integration
- Scales from single disk to distributed clusters seamlessly
- Web UI simplifies management and debugging
- Versioning protects against accidental data loss
- No vendor lock-in due to standard API

### Negative
- Additional service to deploy and monitor
- Storage overhead from erasure coding (if enabled)
- Go binary may be less familiar than Python-based alternatives

### Neutral
- HTTP-based access pattern vs direct filesystem
- S3 semantics (eventual consistency, object immutability)

## Implementation Notes

- **Agent Integration**: Agents store/retrieve files via S3 API using standard libraries
- **Cross-Reference Strategy**: Object keys stored in PostgreSQL/Neo4j for relationship mapping
- **Backup Strategy**: Bucket replication or external sync for disaster recovery
- **Security**: Access policies control agent and user permissions

## Success Criteria

- [ ] Agents successfully store and retrieve large files
- [ ] Multipart uploads handle large documents efficiently
- [ ] Versioning enables file history and recovery
- [ ] Web UI provides operational visibility
- [ ] Backup/restore procedures protect against data loss

## Relationships

- **ENABLES**: Agent file processing, document storage, artifact management
- **INTEGRATES_WITH**: All agent services requiring file storage/retrieval
- **SUPPORTS**: RAG document pipeline, agent output storage, backup systems
