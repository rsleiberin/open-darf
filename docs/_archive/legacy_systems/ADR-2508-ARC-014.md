---
id: ADR-2508-ARC-014
legacy_id: 0016-rag-orchestration
type: ARC
implements_concept: null  # This IS the architectural concept for RAG
status: accepted
date: 2025-08-04
title: "LangChain + AutoGen + GraphRAG for RAG orchestration"

decision_confidence: 8
time_investment: "6_hours"
main_tradeoff: "framework_maturity vs cutting_edge_capabilities"
alternatives_rejected: ["llamaindex", "haystack", "custom_orchestration"]
reevaluate_when: "framework_limitations_encountered OR better_alternatives_mature"

supersedes: null
superseded_by: null
research_basis: "Janus Backend Architecture – Onboarding Brief"
linked_evidence:
  - "../reference/Janus Backend Architecture – Onboarding Brief.pdf"
  - "../reference/Evaluating RAG Retriever Layer Options for Qdrant and Neo4j.pdf"

tags: ["rag", "orchestration", "langchain", "autogen", "graph", "llm"]
---

# ADR 0016 – LangChain + AutoGen + GraphRAG for RAG orchestration

## Decision

LangChain, AutoGen, and GraphRAG selected as the integrated AI orchestration layer for multi-agent reasoning, hybrid retrieval (vector + graph), and tool integration in Janus.

## Context

Janus agents require sophisticated reasoning capabilities that combine multiple data sources (PostgreSQL, Neo4j, Qdrant) with LLM reasoning, multi-agent collaboration, and tool usage. The orchestration layer must bridge knowledge stores with agent cognition while enabling complex multi-step reasoning workflows.

## Rationale

**LangChain for Foundation**: De facto standard for LLM applications providing:
- Rich integrations for all Janus data stores (SQL, graph, vector)
- Agent frameworks enabling LLM-driven tool selection
- Prompt management and conversational memory
- Abstraction layers reducing custom integration code

**AutoGen for Multi-Agent Orchestration**: Microsoft's framework specifically designed for agent-to-agent communication:
- Structured multi-agent dialogues and collaboration patterns
- Specialized agent roles (Planner, Executor, Critic)
- Message-passing and termination condition management
- Enables sophisticated agent workflows beyond single-LLM limitations

**GraphRAG for Hybrid Retrieval**: Cutting-edge approach combining vector similarity with graph relationships:
- Enhances standard RAG with structured knowledge from Neo4j
- Enables multi-hop reasoning through graph traversal
- Improves answer accuracy and explainability
- Provides structured facts alongside document chunks

**Community-Driven Development**: Leverages open-source ecosystems versus building custom orchestration from scratch.

## Research Foundation

Detailed analysis in "Janus Backend Architecture – Onboarding Brief" evaluated:

- **LlamaIndex**: Strong for document QA but less suited for multi-agent orchestration and tool use cases
- **Haystack**: Fixed pipeline approach less flexible for dynamic agent behaviors and free-form reasoning
- **Custom Orchestration**: Would require reimplementing community best practices for prompt management, context handling, and tool integration

Research noted the rapid evolution of LLM orchestration requiring community-supported frameworks to incorporate improvements like "new prompting techniques or safety checks."

## Consequences

### Positive
- State-of-the-art RAG capabilities with hybrid vector+graph retrieval
- Rich ecosystem of community integrations and improvements
- Multi-agent collaboration enables specialized reasoning roles
- Tool abstraction allows agents to interact with all Janus components
- Rapid incorporation of field advances through framework updates

### Negative
- Framework dependency risk if projects pivot or become unmaintained
- Learning curve for team members unfamiliar with these specific tools
- Potential API instability in rapidly evolving frameworks
- Multiple framework coordination complexity

### Neutral
- Python-specific ecosystem (aligns with backend language choice)
- Opinionated approaches may constrain some advanced use cases

## Implementation Notes

- **Data Integration**: LangChain connectors provide unified access to PostgreSQL, Neo4j, and Qdrant
- **Agent Design**: Tool definitions enable agents to query databases, process files, and execute functions
- **GraphRAG Pipeline**: Hybrid retrieval combining semantic search with relationship traversal
- **Multi-Agent Workflows**: AutoGen manages dialogue between specialized agent roles

## Success Criteria

- [ ] Agents successfully query all data stores through unified interface
- [ ] GraphRAG provides enhanced context over vector-only retrieval
- [ ] Multi-agent collaboration produces better outcomes than single agents
- [ ] Tool integration enables agents to perform complex multi-step tasks
- [ ] Framework updates integrate smoothly without breaking changes

## Open Questions

- **Framework Evolution**: Monitor AutoGen and GraphRAG maturity as they're relatively new
- **Performance Optimization**: Evaluate framework overhead for real-time agent responses
- **Local LLM Integration**: Ensure frameworks support offline LLM deployment

## Relationships

- **INTEGRATES_WITH**: All Janus data stores (PostgreSQL, Neo4j, Qdrant, MinIO)
- **ENABLES**: Agent reasoning, multi-agent workflows, hybrid retrieval
- **SUPPORTS**: Complex question answering, knowledge discovery, agent tool usage
